<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <title>OTA Admin • Access Control</title>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <link rel="stylesheet" href="css/admin.css">
    <link rel="icon" href="favicon.svg" type="image/svg+xml">
</head>

<body>

<!-- ================= TOPBAR ================= -->
<div class="topbar">
    <div class="topbarInner">

        <div class="brand">
            <div class="mark">
                <svg width="20" height="20" fill="none" stroke="white" stroke-width="2">
                    <path d="M12 22s7-4.5 7-11a7 7 0 1 0-14 0c0 6.5 7 11 7 11z"/>
                </svg>
            </div>
            <div>
                <div style="font-size:12px;font-weight:1000;">OTA Admin</div>
                <div style="font-size:11px;color:#7c879a;font-weight:900;">Access Control</div>
            </div>
        </div>

        <div style="display:flex;gap:8px;align-items:center;">
            <button class="btn" onclick="location.href='pricing-preview.html'">Pricing Preview</button>
            <button class="btn active">Access Control</button>
            <button class="btn" onclick="location.href='login-logs.html'">Login Logs</button>
            <button class="btn" id="btnLogout">Logout</button>
        </div>

    </div>
</div>

<!-- ================= PAGE ================= -->
<div class="shell">

    <!-- ===== GLOBAL MODE ===== -->
    <section class="section">
        <div class="sectionHeader">
            Global Access Mode
            <span class="pill" id="modePill">Loading…</span>
        </div>

        <div class="sectionBody">
            <div id="modeHint"
                 style="font-size:12px;color:#5b677a;font-weight:900;margin-bottom:10px;">
                Loading mode…
            </div>

            <div style="text-align:right;">
                <button class="btn" id="btnSwitchMode">Switch Mode</button>
            </div>
        </div>
    </section>

    <!-- ===== RULES ===== -->
    <section class="section">
        <div class="sectionHeader">
            Rules
            <div style="display:flex;gap:10px;align-items:center;">
                <span class="pill" id="ruleCount">0 Rules</span>
                <button class="btn" id="btnCreateRule">Create Rule</button>
            </div>
        </div>

        <div class="sectionBody">
            <div class="tableBox">
                <table>
                    <thead>
                    <tr>
                        <th>Type</th>
                        <th>Value</th>
                        <th>Description</th>
                        <th>Status</th>
                        <th>Toggle</th>
                    </tr>
                    </thead>
                    <tbody id="ruleTable"></tbody>
                </table>
            </div>
        </div>
    </section>

</div>

<!-- ================= CREATE RULE MODAL ================= -->
<div class="modalBackdrop" id="modalBackdrop">
    <div class="modal">
        <div class="modalHeader">Create Access Rule</div>

        <div class="field">
            <label>Rule Type</label>
            <select id="ruleType">
                <option value="IP">IP</option>
                <option value="EMAIL">Email</option>
            </select>
        </div>

        <div class="field">
            <label>Rule Value</label>
            <input id="ruleValue" placeholder="Value"/>
        </div>

        <div class="field">
            <label>Behaviour</label>
            <select id="isAllow">
                <option value="true">Allow</option>
                <option value="false">Block</option>
            </select>
        </div>

        <div class="field">
            <label>Description</label>
            <textarea id="description"></textarea>
        </div>

        <div class="modalActions">
            <button class="btn" id="btnCancel">Cancel</button>
            <button class="btn primary" id="btnSubmitRule">Create</button>
        </div>
    </div>
</div>

<!-- ================= MODE CONFIRM MODAL ================= -->
<div class="modalBackdrop" id="modeConfirmBackdrop">
    <div class="modal">
        <div class="modalHeader">Confirm Global Access Mode Change</div>

        <div class="modalBody" id="modeConfirmMsg"></div>

        <div class="modalActions">
            <button class="btn" id="btnCancelMode">Cancel</button>
            <button class="btn primary" id="btnConfirmMode">Confirm Change</button>
        </div>
    </div>
</div>

<!-- ================= TOAST ================= -->
<div class="toastHost" id="toastHost"></div>


<div id="devWarn">
    SECURITY BREACH ATTEMPT DETECTED<br><br>
    SYSTEM COUNTER-MEASURES DEPLOYED
</div>

<script src="js/security.js"></script>
<script src="js/config.js"></script>
<script src="js/access-control.js"></script>

</body>
</html>
